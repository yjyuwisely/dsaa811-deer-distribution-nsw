
---
title: "DSAA811 Preliminary Report â€“ Deer Sightings in NSW"
author: "Yeongjin Yu"
date: "11-04-2025"
output: 
  html_document:
    toc: true
    toc_float: true
    theme: cosmo
    highlight: tango
    css: bold-headings.css
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE, 
                      fig.width = 10, fig.height = 6, fig.align = "center")
```

## Introduction

This report explores the spatial and temporal distribution of deer species (family *Cervidae*) in New South Wales, using open data from the Atlas of Living Australia (ALA). By applying tidyverse tools, the analysis highlights patterns in species frequency, distribution, and observation trends to support ecological research and wildlife management.

As an introduced species to Australia, deer pose significant ecological challenges through habitat modification, competition with native wildlife, and vegetation damage. Understanding their distribution patterns is crucial for effective management strategies across New South Wales, where their populations continue to expand.

**Research Question**: How have the spatial and temporal distributions of feral deer species in NSW changed over time, and what patterns emerge from different species' observations?

## Data Collection

```{r data-collection}
# Load required libraries
library(galah)
library(tidyverse)
library(lubridate)

# Make sure to register your email at https://www.ala.org.au/
# before using galah_config() to access ALA datasets
galah_config(email = "yjyuwisely@gmail.com")

# Connect to the Atlas of Living Australia  
galah_identify("ALA")  

# Filter for deer species in NSW from the ALA
nsw_deer <- galah_call() |>
  galah_filter(
    family == "Cervidae",
    stateProvince == "New South Wales"
  ) |>
  atlas_occurrences()

# Save for CSV file and local use
write.csv(nsw_deer, "nsw_deer_data.csv", row.names = FALSE)
```

## Data Preparation

```{r data-preparation}
# Load the saved data
nsw_deer <- read_csv("nsw_deer_data.csv")

# Clean and transform
nsw_deer_clean <- nsw_deer %>%
  filter(!is.na(decimalLatitude), !is.na(decimalLongitude)) %>%
  mutate(
    observation_date = ymd(substring(eventDate, 1, 10)),
    year = year(observation_date)
  )

# Dataset summary information
cat("Dataset contains", nrow(nsw_deer_clean), "observations across", 
    length(unique(nsw_deer_clean$scientificName)), "deer taxa.")
```

## Exploratory Data Analysis

### Summary by Species

```{r species-summary}
species_summary <- nsw_deer_clean %>%
  group_by(scientificName) %>%
  summarise(
    count = n(),
    earliest_record = min(observation_date, na.rm = TRUE),
    latest_record = max(observation_date, na.rm = TRUE)
  ) %>%
  arrange(desc(count))

knitr::kable(species_summary, caption = "Summary of Deer Species Sightings")
```

### Spatial Distribution of Deer Species in NSW

```{r spatial-distribution, fig.width=10, fig.height=7}
# Using Australian government data  
#install.packages("ozmaps")  
library(ozmaps)  

# Get the NSW border  
nsw_border <- ozmaps::ozmap_states %>%  
  filter(NAME == "New South Wales")  

# Create your map with the NSW border  
ggplot() +  
  # First add the NSW border  
  geom_sf(data = nsw_border, fill = NA, color = "black", size = 1) +  
  # Then add your points  
  geom_point(data = nsw_deer_clean,   
             aes(x = decimalLongitude, y = decimalLatitude, color = scientificName),  
             alpha = 0.7) +  
  # Set the coordinate system  
  coord_sf() +  
  # Rest of your styling  
  theme_minimal() +  
  labs(  
    title = "Distribution of Deer Species in NSW",  
    subtitle = "Data from Atlas of Living Australia",  
    x = "Longitude", y = "Latitude",  
    color = "Species"  
  ) +  
  theme(  
    legend.position = "right",  
    plot.title = element_text(size = 16, face = "bold"),  
    plot.subtitle = element_text(size = 12, face = "italic"),  
    axis.title = element_text(size = 12, face = "bold"),  
    legend.title = element_text(size = 12, face = "bold")  
  ) +  
  guides(color = guide_legend(override.aes = list(size = 4))) 

```

The map shows the geographic distribution of deer species sightings across New South Wales. Most records cluster along the eastern and southeastern regions, particularly in the Great Dividing Range and coastal areas. Broad species labels like "Cervus" or "CERVIDAE" may indicate uncertain identifications, but *Dama dama* (fallow deer) and *Cervus* species dominate overall. The sparse records in western NSW likely reflect both lower deer populations and reduced sampling effort in these less accessible regions.

### Frequency of Deer Species Observations

```{r species-frequency, fig.width=10, fig.height=7}
species_counts <- nsw_deer_clean %>%
  group_by(scientificName) %>%
  summarise(count = n()) %>%
  arrange(desc(count))

ggplot(species_counts, aes(x = reorder(scientificName, count), y = count)) +
  geom_col(fill = "steelblue") +
  coord_flip() +
  theme_minimal() +
  labs(
    title = "Frequency of Deer Species Observations in NSW",
    x = "Species",
    y = "Number of Observations"
  ) +
  theme(
    plot.title = element_text(size = 16, face = "bold"),
    axis.title = element_text(size = 12, face = "bold"),
    axis.text.y = element_text(face = "italic")
  ) +
  geom_text(aes(label = count), hjust = -0.1, size = 3.5)
```

This bar chart shows that *Dama dama* (fallow deer) is by far the most frequently observed species, followed by general *Cervus* records. The dominance of fallow deer aligns with their known extensive distribution in NSW, particularly in the southern and central regions. Less frequent species may reflect smaller populations, more limited distributions, or lower reporting rates. 

### Deer Observations Over Time

```{r temporal-trends, fig.width=10, fig.height=7}
yearly_counts <- nsw_deer_clean %>%
  group_by(year) %>%
  summarise(count = n()) %>%
  filter(!is.na(year))

ggplot(yearly_counts, aes(x = year, y = count)) +
  geom_line() +
  geom_point() +
  theme_minimal() +
  labs(
    title = "Deer Observations in NSW Over Time",
    x = "Year",
    y = "Number of Observations"
  ) +
  theme(
    plot.title = element_text(size = 16, face = "bold"),
    axis.title = element_text(size = 12, face = "bold")
  )
```

This time series reveals a dramatic surge in deer sighting records post-2000, with a significant peak in 2011 (approximately 6,000 observations) followed by several smaller peaks in subsequent years. 

### Seasonal Patterns in Deer Observations

```{r seasonal-patterns, fig.width=10, fig.height=6}
# Extract month and create seasonal analysis
nsw_deer_clean <- nsw_deer_clean %>%
  mutate(month = month(observation_date))

monthly_counts <- nsw_deer_clean %>%
  group_by(month) %>%
  summarise(count = n()) %>%
  filter(!is.na(month))

month_names <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", 
                "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")

ggplot(monthly_counts, aes(x = factor(month, labels = month_names), y = count)) +
  geom_col(fill = "steelblue") +
  theme_minimal() +
  labs(
    title = "Seasonal Patterns in NSW Deer Observations",
    x = "Month",
    y = "Number of Observations"
  ) +
  theme(
    plot.title = element_text(size = 16, face = "bold"),
    axis.title = element_text(size = 12, face = "bold")
  )
```

The seasonal analysis reveals interesting patterns in observation frequency throughout the year. These patterns may reflect a combination of deer behavior, observer activity, and seasonal variation in habitat use. 


## Data Source

Data retrieved from the **Atlas of Living Australia** using the `galah` R package (accessed April 2025).  
Records were filtered to include all deer species (family Cervidae) with observations in New South Wales.
Species filtered by family (*Cervidae*) and location (New South Wales).
